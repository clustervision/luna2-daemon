{% autoescape None %}

{% for ZONE in ZONES %}
zone "{{ ZONE }}" IN {
{%- if (not AUTHORITATIVE[ZONE]) and FORWARDERS[ZONE]|length > 0 %}
    type forward;
    forwarders {
  {%- for FORWARD in FORWARDERS[ZONE] %}
        {{ FORWARD }};
  {%- endfor %}
    };
    forward only;
{%- else %}
    type master;
    file "/var/named/{{ ZONE }}.luna.zone";
  {%- if DYNAMIC_UPDATES[ZONE] %}
    {%- if OMAPIKEY %}
//    allow-update {
//        key omapi_key;
      {%- for IP in ALLOW_UPDATES %}
//        {{ IP }};
      {%- endfor %}
//    };
    update-policy {
        grant omapi_key zonesub A PTR TXT DHCID;
    };
    {%- endif %}
  {%- else %}
    allow-update { none; };
  {%- endif %}
    allow-transfer { none; };
{%- endif %}
};
{% endfor %}

{% endautoescape %}

